% !TeX root = main.tex

\section{CHALLENGES}
\label{sec: challenges}

\begin{frame}{}
    このセクションでは, 組み込みプラットフォームを使用した実験から観察したスケジューリング動作に基づいて, 現在の ROS2 フレームワークの課題について詳しく説明する
\end{frame}

\begin{frame}{}
    \begin{itemize}
        \item 実験は, NVIDIA Xavier NX 上で動作する ROS2 "Eloquent Elusor" バージョンを使用して実施された
\item 表 I に示すように, 10 個のコールバックで構成される 2 つのセーフティクリティカルチェーンが使用される
\item チェーン 1 はチェーン 2 よりも重要であると想定している
\item ユニプロセッサシステムを想定すると, 次の 2 つのケースが実行される
\item (1) 全てのコールバックが単一のエグゼキュータにある, (2) 各チェーンのコールバックが別のエグゼキュータに割り当てられる, すなわち, チェーンごとに 1 つのエグゼキュータが割り当てられる
    \end{itemize}
\end{frame}

\begin{frame}{}
    ここで, 実験から観察された次の 2 つの主要な課題について説明する

\end{frame}

\begin{frame}{課題 1}
    \begin{itemize}
        \item エグゼキュータ内の公平性に基づくスケジューリング
\item セクションで説明されているエグゼキュータのユニークなスケジューリング動作
\item III-B は, タイマコールバックを常に最初にスケジュールし, 他の通常のコールバックの優先順位の割り当てを無効にすることである
\item さらに, ROS2 スケジューラはチェーンによってコールバックを区別しないため, 全てのコールバックはチェーンレベルのタイミング要件を考慮せずにスケジュールされる
\item 図 2 a は, 2 つのチェーンが一緒に実行されるときの単一のエグゼキュータ内のコールバックのスケジューリングタイムラインを示している
\item 観察できるように, ROS2 は時間の経過とともに両方のチェーンの公平な進行をもたらし, そのような公平性に基づくスケジューリングは, 安全性が重要なチェーンの適時性を危険にさらす可能性があり, 表 II に示されているように非常に高い遅延が発生する
    \end{itemize}
\end{frame}

\begin{frame}{エグゼキュータの優先順位の割り当て}
    \begin{itemize}
        \item デフォルトでは, エグゼキュータは Linux カーネルの Completely Fair Scheduler (CFS) [30] によってスケジュールされる
\item このスケジューラーの下では, クリティカルチェーンからのコールバックを実行しているエグゼキュータに予測可能な優先順位を付けることは困難である
\item 幸いなことに, システム開発者は OS レベルの優先度をエグゼキュータに手動で割り当てることができるが, ROS2 はそれを構成するための公式のインターフェイスを提供していない
\item しかし, ROS2 executor の優先順位の割り当てに関する一般的なガイドラインはない
\item 最も直感的な方法は, 図 $2 \mathrm{~b}$ で行ったように, 最も重要なチェーンを実行しているエグゼキュータに最高の優先度を割り当てることである
\item ここで, チェーン 1 の全てのコールバックを含むエグゼキュータは, SCHED\_FIFO で 99 のリアルタイム優先度を持つ
\item ポリシーとチェーン 2 の他のエグゼキュータには 98 がある
\item しかし, この方法では, 表 III に示すように, チェーン 2 自体のインスタンス間の自己干渉によって発生する, チェーン 2 の望ましくないほど長いレイテンシの問題は解決されない
    \end{itemize}
\end{frame}

\begin{frame}{}
    \begin{itemize}
        \item 異なる重要度を持つチェーンからのコールバックが 1 つのノードに混在している場合, そのようなコールバックは異なるエグゼキュータに個別に割り当てることができないため, エグゼキュータの優先順位の割り当てはより困難になることに注意
    \end{itemize}
\end{frame}
